{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/utils.service\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LoginComponent_small_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 18);\n    i0.ɵɵtext(1, \" Fill this field! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_small_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 18);\n    i0.ɵɵtext(1, \" Fill this field! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_small_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.loginData.error, \" \");\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(_utils, _authService, _router) {\n      this._utils = _utils;\n      this._authService = _authService;\n      this._router = _router;\n      this.loginData = {\n        sub: null,\n        error: null,\n        loading: false,\n        data: {\n          email: null,\n          password: null\n        }\n      };\n    }\n    ngOnInit() {\n      this._utils.page.next('login');\n    }\n    ngOnDestroy() {\n      this._utils.page.next('');\n    }\n    login() {\n      this.loginData.data = this._utils.trimObject(this.loginData.data);\n      this.loginData.error = null;\n      this.loginData.loading = true;\n      this.loginData.sub = this._authService.login(this.loginData.data).subscribe(res => {\n        this.loginData.loading = false;\n        this.loginData.sub.unsubscribe();\n        this._router.navigate(['/profile', res.user._id]);\n      }, err => {\n        this.loginData.error = err;\n        this.loginData.loading = false;\n        this.loginData.sub.unsubscribe();\n      });\n    }\n    static #_ = (() => this.ɵfac = function LoginComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LoginComponent)(i0.ɵɵdirectiveInject(i1.UtilsService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 29,\n      vars: 11,\n      consts: [[\"loginForm\", \"ngForm\"], [\"email\", \"ngModel\"], [\"password\", \"ngModel\"], [1, \"card\", \"bgLight\", \"mb-5\", \"pb-5\"], [1, \"container\", \"py-5\"], [1, \"card-body\"], [1, \"text-center\", \"mx-auto\", \"maxW400\"], [1, \"display-3\"], [1, \"row\", \"g-3\", \"mx-auto\", \"mt-2\", \"maxW400\", 3, \"ngSubmit\"], [1, \"col-12\"], [1, \"form-label\"], [\"type\", \"email\", \"required\", \"\", \"name\", \"email\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"type\", \"password\", \"required\", \"\", \"name\", \"password\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-grid\", \"gap-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-dark\", 3, \"disabled\"], [1, \"d-grid\", \"gap-2\", \"mt-2\"], [\"routerLink\", \"/signup\", 1, \"btn\", \"btn-sm\", \"btn-light\"], [1, \"text-danger\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5)(3, \"div\", 6)(4, \"h1\", 7);\n          i0.ɵɵtext(5, \"Log in\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(6, \"hr\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"form\", 8, 0);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_7_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.login());\n          });\n          i0.ɵɵelementStart(9, \"div\", 9)(10, \"label\", 10);\n          i0.ɵɵtext(11, \"Email address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"input\", 11, 1);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.loginData.data.email, $event) || (ctx.loginData.data.email = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(14, LoginComponent_small_14_Template, 2, 0, \"small\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 9)(16, \"label\", 10);\n          i0.ɵɵtext(17, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"input\", 13, 2);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_18_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.loginData.data.password, $event) || (ctx.loginData.data.password = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(20, LoginComponent_small_20_Template, 2, 0, \"small\", 12)(21, LoginComponent_small_21_Template, 2, 1, \"small\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"div\", 9)(23, \"div\", 14)(24, \"button\", 15);\n          i0.ɵɵtext(25);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"div\", 16)(27, \"a\", 17);\n          i0.ɵɵtext(28, \"Haven't any account? Signup\");\n          i0.ɵɵelementEnd()()()()()()();\n        }\n        if (rf & 2) {\n          const loginForm_r3 = i0.ɵɵreference(8);\n          const email_r4 = i0.ɵɵreference(13);\n          const password_r5 = i0.ɵɵreference(19);\n          i0.ɵɵadvance(12);\n          i0.ɵɵclassProp(\"is-invalid\", email_r4.touched && email_r4.invalid);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.loginData.data.email);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", email_r4.touched && email_r4.invalid);\n          i0.ɵɵadvance(4);\n          i0.ɵɵclassProp(\"is-invalid\", password_r5.touched && password_r5.invalid);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.loginData.data.password);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", password_r5.touched && password_r5.invalid);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.loginData.error);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", loginForm_r3.invalid || ctx.loginData.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate1(\" \", ctx.loginData.loading ? \"Logging in...\" : \"Login\", \" \");\n        }\n      },\n      dependencies: [i4.NgIf, i3.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n      styles: [\".card[_ngcontent-%COMP%]{height:70vh}\"]\n    }))();\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}